<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap CSS -->
  <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css'
  rel='stylesheet'
  integrity='sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC'
  crossorigin='anonymous'>

  <!-- Vue 3 -->
  <script src='https://cdn.jsdelivr.net/npm/vue@3.0.2/dist/vue.global.js'></script>
  <!-- Vue 3: production version, optimized for size and speed -->
  <!-- <script src='https://cdn.jsdelivr.net/npm/vue@3.0.2/dist/vue.global.prod.js'></script> -->

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://unpkg.com/@vueuse/shared"></script>
  <script src="https://unpkg.com/@vueuse/core"></script>
  <title>Learning Journey</title>
</head>
<body>
  <style></style>
  <div id="nav-placeholder"></div>
  <main id="app">
    <div class="container" v-for="{ LJID } in learningJourneys" :key="LJID">
      {{ LJID }}
    </div>
  </main>
  <script>
    const { createApp, ref, computed, onMounted } = Vue;
    const { useFetch, useSessionStorage } = window.VueUse;
    createApp({
      setup() {
        const learningJourneys = ref([]);
        const userId = useSessionStorage("user-id"); // probably need to do some testing with null values

        onMounted(async () => {
          const { data, error, statusCode } = await useFetch(`http://localhost:5010/LJ/getAll?UserID=${userId}`).json.get();
          if (error.value) {
            console.log({ err: error.value, code: statusCode.value });
            return;
          }
          learningJourneys.value = data.value.data;
        });

        // something that has to do with the learning journey

        return { learningJourneys };
      }
    }).mount("#app");
  </script>
  <script type="module">
    import navbar from "/navbar.js";
    window.addEventListener('load', () => document.getElementById('nav-placeholder').innerHTML = navbar);
  </script>
</body>
</html>